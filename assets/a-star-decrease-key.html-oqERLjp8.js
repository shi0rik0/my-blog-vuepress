import{_ as s,c as a,d as e,o as p}from"./app-DEX1Ewll.js";const t={};function o(i,n){return p(),a("div",null,[...n[0]||(n[0]=[e(`<h1 id="关于a-算法-我们真的需要decrease-key操作吗" tabindex="-1"><a class="header-anchor" href="#关于a-算法-我们真的需要decrease-key操作吗"><span>关于A*算法：我们真的需要Decrease-Key操作吗？</span></a></h1><p>我们知道，A*算法的伪代码如下：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">start_point <span class="token operator">=</span> Point<span class="token punctuation">(</span>pos<span class="token operator">=</span>start_pos<span class="token punctuation">,</span> g<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> h<span class="token operator">=</span>heuristic<span class="token punctuation">(</span>start_pos<span class="token punctuation">,</span> end_pos<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">open_list <span class="token operator">=</span> <span class="token punctuation">{</span>start_point<span class="token punctuation">}</span></span>
<span class="line">closed_list <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token keyword">not</span> open_list<span class="token punctuation">.</span>is_empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 从open_list中取出f值最小的点</span></span>
<span class="line">    current <span class="token operator">=</span> open_list<span class="token punctuation">.</span>pop_point_with_lowest_f<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 如果当前点是目标点，说明找到最短路径了</span></span>
<span class="line">    <span class="token keyword">if</span> current <span class="token operator">==</span> end_point<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> reconstruct_path<span class="token punctuation">(</span>current<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 否则，处理当前点的邻居</span></span>
<span class="line">    <span class="token keyword">for</span> neighbor <span class="token keyword">in</span> get_neighbors<span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># 已经在closed_list中的点无需处理</span></span>
<span class="line">        <span class="token keyword">if</span> neighbor <span class="token keyword">in</span> closed_list<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">continue</span></span>
<span class="line">        tentative_g <span class="token operator">=</span> current<span class="token punctuation">.</span>g <span class="token operator">+</span> cost<span class="token punctuation">(</span>current<span class="token punctuation">,</span> neighbor<span class="token punctuation">)</span></span>
<span class="line">        tentative_h <span class="token operator">=</span> heuristic<span class="token punctuation">(</span>neighbor<span class="token punctuation">,</span> end_pos<span class="token punctuation">)</span></span>
<span class="line">        tentative_neighbor <span class="token operator">=</span> Point<span class="token punctuation">(</span>pos<span class="token operator">=</span>neighbor<span class="token punctuation">,</span> g<span class="token operator">=</span>tentative_g<span class="token punctuation">,</span> h<span class="token operator">=</span>tentative_h<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># 如果邻居点是新发现的点，直接加入open_list</span></span>
<span class="line">        <span class="token keyword">if</span> neighbor <span class="token keyword">not</span> <span class="token keyword">in</span> open_list<span class="token punctuation">:</span></span>
<span class="line">            open_list<span class="token punctuation">.</span>add<span class="token punctuation">(</span>tentative_neighbor<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># 否则，检查能否更新邻居点的g值</span></span>
<span class="line">        <span class="token keyword">elif</span> tentative_neighbor<span class="token punctuation">.</span>g <span class="token operator">&lt;</span> open_list<span class="token punctuation">.</span>get<span class="token punctuation">(</span>neighbor<span class="token punctuation">)</span><span class="token punctuation">.</span>g<span class="token punctuation">:</span></span>
<span class="line">            open_list<span class="token punctuation">.</span>update<span class="token punctuation">(</span>tentative_neighbor<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 当前点处理完毕，加入closed_list</span></span>
<span class="line">    closed_list<span class="token punctuation">.</span>add<span class="token punctuation">(</span>current<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>假如令<code>heuristic(start, end)</code>永远返回0，那么A*算法就会退化为Dijkstra算法。</p><p>这里实现上最困难的步骤是<code>open_list.update(tentative_neighbor)</code>这个分支，因为更改g值会影响到f值，而open_list是一个按照f值排序的优先队列，因此需要重新调整这个点在open_list中的位置，这种操作叫做“decrease-key”操作。基于二叉堆的优先队列实现并不能高效地支持这种操作，因此有两种解决方案：</p><ol><li>使用一个hash表来降低decrease-key操作的时间复杂度： <ul><li>使用一个hash表来存储点到其在open_list中的位置的映射。</li><li>当需要更新g值时，先在hash表中找到点在open_list中的位置，然后降低其g值，并进行冒泡操作来调整其位置。</li></ul></li><li>不使用decrease-key操作： <ul><li>不更新open_list中的点，而是无论如何都将新的点加入open_list中，然后在处理节点时忽略那些已经在closed_list中的点。</li></ul></li></ol><p>第一种方法是教科书和大多数实现采用的方法，但是它的实现比较复杂。也有研究认为，第二种方法的性能在稀疏图上会更好。</p><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ol><li>https://stackoverflow.com/questions/9255620/why-does-dijkstras-algorithm-use-decrease-key</li><li><a href="https://www3.cs.stonybrook.edu/~rezaul/papers/TR-07-54.pdf" target="_blank" rel="noopener noreferrer">Priority Queues and Dijkstra’s Algorithm (UTCS Technical Report TR-07-54)</a></li></ol>`,9)])])}const c=s(t,[["render",o]]),u=JSON.parse('{"path":"/posts/2025/05/a-star-decrease-key.html","title":"关于A*算法：我们真的需要Decrease-Key操作吗？","lang":"zh-CN","frontmatter":{"date":"2025-05-29T00:00:00.000Z"},"headers":[{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"git":{"updatedTime":1763699399000,"contributors":[{"name":"shi0rik0","username":"shi0rik0","email":"anguuan@outlook.com","commits":2,"url":"https://github.com/shi0rik0"}],"changelog":[{"hash":"35d50711ef3a591a2383977aa02873c707aa5c1e","time":1763699399000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Organize files by date"},{"hash":"27621ea60c6645dc9e44007e7ab6fd2858c37eaf","time":1763698804000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Migrate posts"}]},"filePathRelative":"posts/2025/05/a-star-decrease-key.md","excerpt":"\\n<p>我们知道，A*算法的伪代码如下：</p>\\n<div class=\\"language-python line-numbers-mode\\" data-highlighter=\\"prismjs\\" data-ext=\\"py\\"><pre><code><span class=\\"line\\">start_point <span class=\\"token operator\\">=</span> Point<span class=\\"token punctuation\\">(</span>pos<span class=\\"token operator\\">=</span>start_pos<span class=\\"token punctuation\\">,</span> g<span class=\\"token operator\\">=</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> h<span class=\\"token operator\\">=</span>heuristic<span class=\\"token punctuation\\">(</span>start_pos<span class=\\"token punctuation\\">,</span> end_pos<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">open_list <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span>start_point<span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">closed_list <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span class=\\"token keyword\\">while</span> <span class=\\"token keyword\\">not</span> open_list<span class=\\"token punctuation\\">.</span>is_empty<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">    <span class=\\"token comment\\"># 从open_list中取出f值最小的点</span></span>\\n<span class=\\"line\\">    current <span class=\\"token operator\\">=</span> open_list<span class=\\"token punctuation\\">.</span>pop_point_with_lowest_f<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">    <span class=\\"token comment\\"># 如果当前点是目标点，说明找到最短路径了</span></span>\\n<span class=\\"line\\">    <span class=\\"token keyword\\">if</span> current <span class=\\"token operator\\">==</span> end_point<span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">        <span class=\\"token keyword\\">return</span> reconstruct_path<span class=\\"token punctuation\\">(</span>current<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">    <span class=\\"token comment\\"># 否则，处理当前点的邻居</span></span>\\n<span class=\\"line\\">    <span class=\\"token keyword\\">for</span> neighbor <span class=\\"token keyword\\">in</span> get_neighbors<span class=\\"token punctuation\\">(</span>current<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">        <span class=\\"token comment\\"># 已经在closed_list中的点无需处理</span></span>\\n<span class=\\"line\\">        <span class=\\"token keyword\\">if</span> neighbor <span class=\\"token keyword\\">in</span> closed_list<span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">            <span class=\\"token keyword\\">continue</span></span>\\n<span class=\\"line\\">        tentative_g <span class=\\"token operator\\">=</span> current<span class=\\"token punctuation\\">.</span>g <span class=\\"token operator\\">+</span> cost<span class=\\"token punctuation\\">(</span>current<span class=\\"token punctuation\\">,</span> neighbor<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">        tentative_h <span class=\\"token operator\\">=</span> heuristic<span class=\\"token punctuation\\">(</span>neighbor<span class=\\"token punctuation\\">,</span> end_pos<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">        tentative_neighbor <span class=\\"token operator\\">=</span> Point<span class=\\"token punctuation\\">(</span>pos<span class=\\"token operator\\">=</span>neighbor<span class=\\"token punctuation\\">,</span> g<span class=\\"token operator\\">=</span>tentative_g<span class=\\"token punctuation\\">,</span> h<span class=\\"token operator\\">=</span>tentative_h<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">        <span class=\\"token comment\\"># 如果邻居点是新发现的点，直接加入open_list</span></span>\\n<span class=\\"line\\">        <span class=\\"token keyword\\">if</span> neighbor <span class=\\"token keyword\\">not</span> <span class=\\"token keyword\\">in</span> open_list<span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">            open_list<span class=\\"token punctuation\\">.</span>add<span class=\\"token punctuation\\">(</span>tentative_neighbor<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">        <span class=\\"token comment\\"># 否则，检查能否更新邻居点的g值</span></span>\\n<span class=\\"line\\">        <span class=\\"token keyword\\">elif</span> tentative_neighbor<span class=\\"token punctuation\\">.</span>g <span class=\\"token operator\\">&lt;</span> open_list<span class=\\"token punctuation\\">.</span>get<span class=\\"token punctuation\\">(</span>neighbor<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>g<span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">            open_list<span class=\\"token punctuation\\">.</span>update<span class=\\"token punctuation\\">(</span>tentative_neighbor<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">    <span class=\\"token comment\\"># 当前点处理完毕，加入closed_list</span></span>\\n<span class=\\"line\\">    closed_list<span class=\\"token punctuation\\">.</span>add<span class=\\"token punctuation\\">(</span>current<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\"></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>"}');export{c as comp,u as data};
