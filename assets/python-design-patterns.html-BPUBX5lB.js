import{_ as n,c as a,d as e,o as p}from"./app-D9VVartN.js";const t={};function i(l,s){return p(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="用python实现经典设计模式-更新中" tabindex="-1"><a class="header-anchor" href="#用python实现经典设计模式-更新中"><span>用Python实现经典设计模式（更新中）</span></a></h1><h2 id="观察者模式-observer-pattern" tabindex="-1"><a class="header-anchor" href="#观察者模式-observer-pattern"><span>观察者模式（Observer Pattern）</span></a></h2><p>所谓观察者模式，就是一个简单的消息通知机制。当一个对象想要发送消息时，订阅了这个消息的对象会收到通知。</p><p>假设我们有一个杂志社<code>MagazinePublisher</code>，它有很多订阅者<code>Subscriber</code>，当杂志社有新的杂志发布时，会通知所有的订阅者。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Subscriber</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> received message: </span><span class="token interpolation"><span class="token punctuation">{</span>message<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MagazinePublisher</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>subscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">add_subscriber</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> subscriber<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>subscriber<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">remove_subscriber</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> subscriber<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>subscriber<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">notify_subscribers</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">for</span> subscriber <span class="token keyword">in</span> self<span class="token punctuation">.</span>subscribers<span class="token punctuation">:</span></span>
<span class="line">            subscriber<span class="token punctuation">.</span>update<span class="token punctuation">(</span>message<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">subscriber1 <span class="token operator">=</span> Subscriber<span class="token punctuation">(</span><span class="token string">&#39;Alice&#39;</span><span class="token punctuation">)</span></span>
<span class="line">subscriber2 <span class="token operator">=</span> Subscriber<span class="token punctuation">(</span><span class="token string">&#39;Bob&#39;</span><span class="token punctuation">)</span></span>
<span class="line">publisher <span class="token operator">=</span> MagazinePublisher<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">publisher<span class="token punctuation">.</span>add_subscriber<span class="token punctuation">(</span>subscriber1<span class="token punctuation">)</span></span>
<span class="line">publisher<span class="token punctuation">.</span>add_subscriber<span class="token punctuation">(</span>subscriber2<span class="token punctuation">)</span></span>
<span class="line">publisher<span class="token punctuation">.</span>notify_subscribers<span class="token punctuation">(</span><span class="token string">&#39;New magazine is published!&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码执行后的输出是：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">Alice received message: New magazine is published!</span>
<span class="line">Bob received message: New magazine is published!</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="简单工厂模式-simple-factory-pattern" tabindex="-1"><a class="header-anchor" href="#简单工厂模式-simple-factory-pattern"><span>简单工厂模式（Simple Factory Pattern）</span></a></h2><p>所谓简单工厂模式，就是一个函数的返回类型会因为传入的参数不同而有所不同。</p><p>假设我们有一个汉堡店，可以根据顾客需求返回不同的汉堡。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Hamburger</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">eat</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;Eating a </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>_type<span class="token punctuation">}</span></span><span class="token string"> hamburger&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">BeefHamburger</span><span class="token punctuation">(</span>Hamburger<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>_type <span class="token operator">=</span> <span class="token string">&#39;beef&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ChickenHamburger</span><span class="token punctuation">(</span>Hamburger<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>_type <span class="token operator">=</span> <span class="token string">&#39;chicken&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">make_hamburger</span><span class="token punctuation">(</span>hamburger_type<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">if</span> hamburger_type <span class="token operator">==</span> <span class="token string">&#39;beef&#39;</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> BeefHamburger<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">elif</span> hamburger_type <span class="token operator">==</span> <span class="token string">&#39;chicken&#39;</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> ChickenHamburger<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&#39;Invalid hamburger type&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">beef_hamburger <span class="token operator">=</span> make_hamburger<span class="token punctuation">(</span><span class="token string">&#39;beef&#39;</span><span class="token punctuation">)</span></span>
<span class="line">beef_hamburger<span class="token punctuation">.</span>eat<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">chicken_hamburger <span class="token operator">=</span> make_hamburger<span class="token punctuation">(</span><span class="token string">&#39;chicken&#39;</span><span class="token punctuation">)</span></span>
<span class="line">chicken_hamburger<span class="token punctuation">.</span>eat<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码执行后的输出是：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">Eating a beef hamburger</span>
<span class="line">Eating a chicken hamburger</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="单例模式-singleton-pattern" tabindex="-1"><a class="header-anchor" href="#单例模式-singleton-pattern"><span>单例模式（Singleton Pattern）</span></a></h2><p>所谓单例模式，就是一个类只能有一个实例。在 Python 中，最简单的实现方式就是利用 module，因为一个 Python module 只会执行一次。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># singleton.py</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__class__<span class="token punctuation">,</span> <span class="token string">&#39;_created&#39;</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&#39;Singleton instance already exists&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>_created <span class="token operator">=</span> <span class="token boolean">True</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">do_something</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;Doing something&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">singleton <span class="token operator">=</span> Singleton<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># main.py</span></span>
<span class="line"><span class="token keyword">from</span> singleton <span class="token keyword">import</span> singleton</span>
<span class="line"></span>
<span class="line">singleton<span class="token punctuation">.</span>do_something<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="策略模式-strategy-pattern" tabindex="-1"><a class="header-anchor" href="#策略模式-strategy-pattern"><span>策略模式（Strategy Pattern）</span></a></h2><p>策略模式本质上就是利用了组合的思想，把类的一些功能“外包”给其他类。</p><p>（还在更新中……）</p>`,20)])])}const o=n(t,[["render",i]]),u=JSON.parse(`{"path":"/posts/2024/12/python-design-patterns.html","title":"用Python实现经典设计模式（更新中）","lang":"zh-CN","frontmatter":{"date":"2024-12-06T00:00:00.000Z"},"headers":[{"level":2,"title":"观察者模式（Observer Pattern）","slug":"观察者模式-observer-pattern","link":"#观察者模式-observer-pattern","children":[]},{"level":2,"title":"简单工厂模式（Simple Factory Pattern）","slug":"简单工厂模式-simple-factory-pattern","link":"#简单工厂模式-simple-factory-pattern","children":[]},{"level":2,"title":"单例模式（Singleton Pattern）","slug":"单例模式-singleton-pattern","link":"#单例模式-singleton-pattern","children":[]},{"level":2,"title":"策略模式（Strategy Pattern）","slug":"策略模式-strategy-pattern","link":"#策略模式-strategy-pattern","children":[]}],"git":{"updatedTime":1763699399000,"contributors":[{"name":"shi0rik0","username":"shi0rik0","email":"anguuan@outlook.com","commits":2,"url":"https://github.com/shi0rik0"}],"changelog":[{"hash":"35d50711ef3a591a2383977aa02873c707aa5c1e","time":1763699399000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Organize files by date"},{"hash":"27621ea60c6645dc9e44007e7ab6fd2858c37eaf","time":1763698804000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Migrate posts"}]},"filePathRelative":"posts/2024/12/python-design-patterns.md","excerpt":"\\n<h2>观察者模式（Observer Pattern）</h2>\\n<p>所谓观察者模式，就是一个简单的消息通知机制。当一个对象想要发送消息时，订阅了这个消息的对象会收到通知。</p>\\n<p>假设我们有一个杂志社<code>MagazinePublisher</code>，它有很多订阅者<code>Subscriber</code>，当杂志社有新的杂志发布时，会通知所有的订阅者。</p>\\n<div class=\\"language-python line-numbers-mode\\" data-highlighter=\\"prismjs\\" data-ext=\\"py\\"><pre><code><span class=\\"line\\"><span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">Subscriber</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">    <span class=\\"token keyword\\">def</span> <span class=\\"token function\\">__init__</span><span class=\\"token punctuation\\">(</span>self<span class=\\"token punctuation\\">,</span> name<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">        self<span class=\\"token punctuation\\">.</span>name <span class=\\"token operator\\">=</span> name</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">    <span class=\\"token keyword\\">def</span> <span class=\\"token function\\">update</span><span class=\\"token punctuation\\">(</span>self<span class=\\"token punctuation\\">,</span> message<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">        <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string-interpolation\\"><span class=\\"token string\\">f'</span><span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span>self<span class=\\"token punctuation\\">.</span>name<span class=\\"token punctuation\\">}</span></span><span class=\\"token string\\"> received message: </span><span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span>message<span class=\\"token punctuation\\">}</span></span><span class=\\"token string\\">'</span></span><span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">MagazinePublisher</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">    <span class=\\"token keyword\\">def</span> <span class=\\"token function\\">__init__</span><span class=\\"token punctuation\\">(</span>self<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">        self<span class=\\"token punctuation\\">.</span>subscribers <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">    <span class=\\"token keyword\\">def</span> <span class=\\"token function\\">add_subscriber</span><span class=\\"token punctuation\\">(</span>self<span class=\\"token punctuation\\">,</span> subscriber<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">        self<span class=\\"token punctuation\\">.</span>subscribers<span class=\\"token punctuation\\">.</span>append<span class=\\"token punctuation\\">(</span>subscriber<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">    <span class=\\"token keyword\\">def</span> <span class=\\"token function\\">remove_subscriber</span><span class=\\"token punctuation\\">(</span>self<span class=\\"token punctuation\\">,</span> subscriber<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">        self<span class=\\"token punctuation\\">.</span>subscribers<span class=\\"token punctuation\\">.</span>remove<span class=\\"token punctuation\\">(</span>subscriber<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">    <span class=\\"token keyword\\">def</span> <span class=\\"token function\\">notify_subscribers</span><span class=\\"token punctuation\\">(</span>self<span class=\\"token punctuation\\">,</span> message<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">        <span class=\\"token keyword\\">for</span> subscriber <span class=\\"token keyword\\">in</span> self<span class=\\"token punctuation\\">.</span>subscribers<span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">            subscriber<span class=\\"token punctuation\\">.</span>update<span class=\\"token punctuation\\">(</span>message<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">subscriber1 <span class=\\"token operator\\">=</span> Subscriber<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'Alice'</span><span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">subscriber2 <span class=\\"token operator\\">=</span> Subscriber<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'Bob'</span><span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">publisher <span class=\\"token operator\\">=</span> MagazinePublisher<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">publisher<span class=\\"token punctuation\\">.</span>add_subscriber<span class=\\"token punctuation\\">(</span>subscriber1<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">publisher<span class=\\"token punctuation\\">.</span>add_subscriber<span class=\\"token punctuation\\">(</span>subscriber2<span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\">publisher<span class=\\"token punctuation\\">.</span>notify_subscribers<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'New magazine is published!'</span><span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\"></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>"}`);export{o as comp,u as data};
