import{_ as s,c as n,d as t,o as e}from"./app-D9VVartN.js";const p={};function l(c,a){return e(),n("div",null,[...a[0]||(a[0]=[t(`<h1 id="在flex布局中实现按比例分配宽度或高度" tabindex="-1"><a class="header-anchor" href="#在flex布局中实现按比例分配宽度或高度"><span>在flex布局中实现按比例分配宽度或高度</span></a></h1><h2 id="需求" tabindex="-1"><a class="header-anchor" href="#需求"><span>需求</span></a></h2><p>假设我们有这样的布局：</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex flex-col w-[400px] h-[400px]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>div 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>div 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>div 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们希望实现这样的效果：三个 div 的高度固定按照 1:2:3 的比例分配。</p><h2 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h2><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex flex-col w-[400px] h-[400px]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex-1 min-h-0 overflow-clip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>div 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex-[2_0_0] min-h-0 overflow-clip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>div 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex-[3_0_0] min-h-0 overflow-clip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>div 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="要点解析" tabindex="-1"><a class="header-anchor" href="#要点解析"><span>要点解析</span></a></h2><h3 id="flex-grow-和-flex-basis" tabindex="-1"><a class="header-anchor" href="#flex-grow-和-flex-basis"><span>flex-grow 和 flex-basis</span></a></h3><p>在 Tailwind CSS 中，class <code>flex-1</code> 表示 CSS 中的属性 <code>flex: 1 1 0%</code>，<code>flex-[2_0_0]</code> 表示 <code>flex: 2 0 0</code>，<code>flex-[3_0_0]</code> 表示 <code>flex: 3 0 0</code>。而 CSS 中<code>flex: X Y Z</code>是一个缩写，相当于：</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code><span class="line"><span class="token property">flex-grow</span><span class="token punctuation">:</span> X<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">flex-shrink</span><span class="token punctuation">:</span> Y<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">flex-basis</span><span class="token punctuation">:</span> Z<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中，<code>flex-grow</code> 表示元素的放大比例，<code>flex-shrink</code> 表示元素的缩小比例，<code>flex-basis</code> 表示元素的基础大小。</p><p>下面举个例子来说明<code>flex-grow</code>和<code>flex-basis</code>的作用，<code>flex-shrink</code>的道理是类似的。</p><p>考虑下面的布局：</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex flex-col h-[400px]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex-[2_0_100px]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>div 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex-[1_0_0]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>div 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>父元素的高度是 400px，而 div 1 的 basis 是 100px，div 2 的 basis 是 0。因此，减去基础高度之后，父元素还剩下 300px 的高度可以分配，这些空间按照 2:1 的比例分配给 div 1 和 div 2，所以 div 1 的分配到的高度是 200px，div 2 是 100px。最终的效果是 div 1 的高度是 100 + 200px = 300px，div 2 的高度是 0 + 100px = 100px。</p><h3 id="min-h-0" tabindex="-1"><a class="header-anchor" href="#min-h-0"><span>min-h-0</span></a></h3><p>在解决方案中，我们还设置了<code>min-h-0</code>，也就是<code>min-height: 0</code>。这是因为在 flex 布局中，如果子元素的内容超出了子元素原本的高度，子元素会被强制拉伸，从而破坏比例分配。因此，我们需要设置<code>min-height: 0</code>来让溢出的内容不会影响到父元素的高度。</p><h3 id="overflow-clip" tabindex="-1"><a class="header-anchor" href="#overflow-clip"><span>overflow-clip</span></a></h3><p>经过上面的设置，现在 div block 的高度已经没问题了，但是 div 里面的内容还是可能会溢出。因为在 HTML 中，并没有规定元素的内容（比如文本）不能超出元素的边界。因此，我们需要设置<code>overflow-clip</code>来截断溢出的内容，也可以设置<code>overflow-auto</code>来显示一个滚动条。</p><h3 id="关于-padding-和-border-要注意的地方" tabindex="-1"><a class="header-anchor" href="#关于-padding-和-border-要注意的地方"><span>关于 padding 和 border 要注意的地方</span></a></h3><p>这里有一个细节，就是 padding 和 border 也会影响元素的基础宽度或高度，从而破坏比例分配。StackOverflow 上有一个专门讨论这个问题的帖子：<a href="https://stackoverflow.com/questions/33145242/why-is-padding-expanding-a-flex-item" target="_blank" rel="noopener noreferrer">Why is padding expanding a flex item?</a>。</p><p>简单来说，问题出在<code>flex-basis</code>的计算上。最终生效的<code>flex-basis</code>的值是按照下面的公式计算的：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">real_flex_basis = max(flex_basis, padding + border)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>下面是一些解决办法：</p><ol><li>如果没有强迫症的话，就不管这个问题。反正一般情况下 padding 和 border 不会太大，不会对比例分配产生太大的影响。</li><li>设置 padding 和 border 都为 0。</li><li>如果需要设置 padding 或 border，可以手动将<code>flex-basis</code>设置成一个符合比例的同时又略微大于 padding + border 的值。</li></ol>`,26)])])}const i=s(p,[["render",l]]),u=JSON.parse('{"path":"/posts/2025/01/flex-ratio.html","title":"在flex布局中实现按比例分配宽度或高度","lang":"zh-CN","frontmatter":{"date":"2025-01-08T00:00:00.000Z"},"headers":[{"level":2,"title":"需求","slug":"需求","link":"#需求","children":[]},{"level":2,"title":"解决方案","slug":"解决方案","link":"#解决方案","children":[]},{"level":2,"title":"要点解析","slug":"要点解析","link":"#要点解析","children":[{"level":3,"title":"flex-grow 和 flex-basis","slug":"flex-grow-和-flex-basis","link":"#flex-grow-和-flex-basis","children":[]},{"level":3,"title":"min-h-0","slug":"min-h-0","link":"#min-h-0","children":[]},{"level":3,"title":"overflow-clip","slug":"overflow-clip","link":"#overflow-clip","children":[]},{"level":3,"title":"关于 padding 和 border 要注意的地方","slug":"关于-padding-和-border-要注意的地方","link":"#关于-padding-和-border-要注意的地方","children":[]}]}],"git":{"updatedTime":1763699399000,"contributors":[{"name":"shi0rik0","username":"shi0rik0","email":"anguuan@outlook.com","commits":2,"url":"https://github.com/shi0rik0"}],"changelog":[{"hash":"35d50711ef3a591a2383977aa02873c707aa5c1e","time":1763699399000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Organize files by date"},{"hash":"27621ea60c6645dc9e44007e7ab6fd2858c37eaf","time":1763698804000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Migrate posts"}]},"filePathRelative":"posts/2025/01/flex-ratio.md","excerpt":"\\n<h2>需求</h2>\\n<p>假设我们有这样的布局：</p>\\n<div class=\\"language-html line-numbers-mode\\" data-highlighter=\\"prismjs\\" data-ext=\\"html\\"><pre><code><span class=\\"line\\"><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>div</span> <span class=\\"token attr-name\\">class</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>flex flex-col w-[400px] h-[400px]<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span></span>\\n<span class=\\"line\\">  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>div</span><span class=\\"token punctuation\\">&gt;</span></span>div 1<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>div</span><span class=\\"token punctuation\\">&gt;</span></span></span>\\n<span class=\\"line\\">  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>div</span><span class=\\"token punctuation\\">&gt;</span></span>div 2<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>div</span><span class=\\"token punctuation\\">&gt;</span></span></span>\\n<span class=\\"line\\">  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>div</span><span class=\\"token punctuation\\">&gt;</span></span>div 3<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>div</span><span class=\\"token punctuation\\">&gt;</span></span></span>\\n<span class=\\"line\\"><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>div</span><span class=\\"token punctuation\\">&gt;</span></span></span>\\n<span class=\\"line\\"></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>"}');export{i as comp,u as data};
