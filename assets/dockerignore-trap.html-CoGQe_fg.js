import{_ as o,c as r,d as i,o as t}from"./app-D9VVartN.js";const n={};function a(c,e){return t(),r("div",null,[...e[0]||(e[0]=[i('<h1 id="关于-dockerignore的陷阱" tabindex="-1"><a class="header-anchor" href="#关于-dockerignore的陷阱"><span>关于.dockerignore的陷阱</span></a></h1><p>在 Docker 构建镜像的时候，默认会将 context 下的所有文件打包发送到 builder 进程。这是因为 Docker builder 采用了一种客户端/服务器的架构，这样就可以实现远程构建。但是如果 context 下面文件很大，就会影响构建速度。为此，Docker 提供了一个机制，可以通过在<code>.dockerignore</code>文件中指定要排除的文件。但是这个.dockerignore 的语法和.gitignore 有很大差异，因此很容易写错，其中一个陷阱就是，在.gitignore 中，<code>foo</code>等价于<code>**/foo</code>，而在.dockerignore 中，这等价于<code>/foo</code>。除此之外还有很多微妙的差异，比如<a href="https://zzz.buzz/2018/05/23/differences-of-rules-between-gitignore-and-dockerignore/" target="_blank" rel="noopener noreferrer">这篇文章</a>中指出的：</p><blockquote><p>In .gitignore, if a path is listed as ignored (e.g. /dir), then any files or folders under that path is ignored and it is not possible to re-include them via negation (e.g. !/dir/file) as the parent directory of them is excluded;</p><p>while in .dockerignore, even if a parent path is ignored, files or folders under it can still be re-included via negation.</p></blockquote>',3)])])}const s=o(n,[["render",a]]),g=JSON.parse('{"path":"/posts/2024/09/dockerignore-trap.html","title":"关于.dockerignore的陷阱","lang":"zh-CN","frontmatter":{"date":"2024-09-24T00:00:00.000Z"},"headers":[],"git":{"updatedTime":1763699399000,"contributors":[{"name":"shi0rik0","username":"shi0rik0","email":"anguuan@outlook.com","commits":2,"url":"https://github.com/shi0rik0"}],"changelog":[{"hash":"35d50711ef3a591a2383977aa02873c707aa5c1e","time":1763699399000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Organize files by date"},{"hash":"27621ea60c6645dc9e44007e7ab6fd2858c37eaf","time":1763698804000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Migrate posts"}]},"filePathRelative":"posts/2024/09/dockerignore-trap.md","excerpt":"\\n<p>在 Docker 构建镜像的时候，默认会将 context 下的所有文件打包发送到 builder 进程。这是因为 Docker builder 采用了一种客户端/服务器的架构，这样就可以实现远程构建。但是如果 context 下面文件很大，就会影响构建速度。为此，Docker 提供了一个机制，可以通过在<code>.dockerignore</code>文件中指定要排除的文件。但是这个.dockerignore 的语法和.gitignore 有很大差异，因此很容易写错，其中一个陷阱就是，在.gitignore 中，<code>foo</code>等价于<code>**/foo</code>，而在.dockerignore 中，这等价于<code>/foo</code>。除此之外还有很多微妙的差异，比如<a href=\\"https://zzz.buzz/2018/05/23/differences-of-rules-between-gitignore-and-dockerignore/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">这篇文章</a>中指出的：</p>"}');export{s as comp,g as data};
