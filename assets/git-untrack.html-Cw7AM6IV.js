import{_ as s,c as a,d as e,o as t}from"./app-DEX1Ewll.js";const p={};function o(i,n){return t(),a("div",null,[...n[0]||(n[0]=[e(`<h1 id="git取消追踪文件" tabindex="-1"><a class="header-anchor" href="#git取消追踪文件"><span>Git取消追踪文件</span></a></h1><p>Git 可以用<code>.gitignore</code>来忽略一些文件，但是如果是已经被追踪（track）的文件，将其添加到<code>.gitignore</code>并不会取消追踪。这时候就需要用到<code>git rm --cached</code>命令来手动取消追踪。但是有时候，误追踪的文件自己都不知道，有没有办法可以自动找出所有被追踪，但是原本应该被忽略的文件呢？</p><p>查阅 Git 文档之后，发现有两个命令可以实现这个功能：</p><ol><li><code>git ls-files</code>，这个命令可以列出所有被追踪的文件。</li><li><code>git check-ignore --no-index</code>，这个命令可以用来判断某个文件是否被<code>.gitignore</code>忽略。这里必须加上<code>--no-index</code>参数，否则将不会输出已经被追踪的文件。</li></ol><p>结合这两个命令，我们可以写一个脚本来找出所有被追踪，但是原本应该被忽略的文件：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> subprocess</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">is_path_ignored</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">return</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;git&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;check-ignore&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;--no-index&#39;</span><span class="token punctuation">,</span> path<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                          check<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span></span>
<span class="line">                          capture_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>returncode <span class="token operator">==</span> <span class="token number">0</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">tracked_files <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;git&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ls-files&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                               check<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span></span>
<span class="line">                               capture_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span></span>
<span class="line">                               text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>splitlines<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> tracked_files<span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">if</span> is_path_ignored<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6)])])}const l=s(p,[["render",o]]),u=JSON.parse('{"path":"/posts/2025/01/git-untrack.html","title":"Git取消追踪文件","lang":"zh-CN","frontmatter":{"date":"2025-01-19T00:00:00.000Z"},"headers":[],"git":{"updatedTime":1763699399000,"contributors":[{"name":"shi0rik0","username":"shi0rik0","email":"anguuan@outlook.com","commits":2,"url":"https://github.com/shi0rik0"}],"changelog":[{"hash":"35d50711ef3a591a2383977aa02873c707aa5c1e","time":1763699399000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Organize files by date"},{"hash":"27621ea60c6645dc9e44007e7ab6fd2858c37eaf","time":1763698804000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Migrate posts"}]},"filePathRelative":"posts/2025/01/git-untrack.md","excerpt":"\\n<p>Git 可以用<code>.gitignore</code>来忽略一些文件，但是如果是已经被追踪（track）的文件，将其添加到<code>.gitignore</code>并不会取消追踪。这时候就需要用到<code>git rm --cached</code>命令来手动取消追踪。但是有时候，误追踪的文件自己都不知道，有没有办法可以自动找出所有被追踪，但是原本应该被忽略的文件呢？</p>\\n<p>查阅 Git 文档之后，发现有两个命令可以实现这个功能：</p>\\n<ol>\\n<li><code>git ls-files</code>，这个命令可以列出所有被追踪的文件。</li>\\n<li><code>git check-ignore --no-index</code>，这个命令可以用来判断某个文件是否被<code>.gitignore</code>忽略。这里必须加上<code>--no-index</code>参数，否则将不会输出已经被追踪的文件。</li>\\n</ol>"}');export{l as comp,u as data};
