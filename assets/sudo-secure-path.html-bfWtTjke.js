import{_ as s,c as a,d as o,o as t}from"./app-DDoPRsSr.js";const c={};function n(d,e){return t(),a("div",null,[...e[0]||(e[0]=[o(`<h1 id="关于sudo的secure-path设置" tabindex="-1"><a class="header-anchor" href="#关于sudo的secure-path设置"><span>关于sudo的secure_path设置</span></a></h1><p>sudo 有一个名为<code>secure_path</code>的设置，从 sudo 1.9.16 开始，<code>secure_path</code>设置会默认启用。<a href="https://www.sudo.ws/posts/2024/09/why-sudo-1.9.16-enables-secure_path-by-default/" target="_blank" rel="noopener noreferrer">官方博客</a>介绍了这个改动的原因。</p><p>当使用 sudo 执行命令的时候，用户当前的环境变量会被修改。其中<code>PATH</code>会被设置为<code>secure_path</code>的值。因此，经常会发生加了<code>sudo</code>之后就找不到命令的情况。解决方法也是非常的简单，要么修改<code>secure_path</code>的值，要么直接删除这个设置，这样 sudo 就不会修改<code>PATH</code>了。</p><p>运行<code>sudo visudo</code>，然后删除或者修改下面这一行即可。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">Defaults        secure_path=&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>还有一种方法是使用绝对路径来运行命令，可以用<code>which</code>命令来查看命令的绝对路径。下面是一个例子。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> COMMAND<span class="token variable">)</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,7)])])}const u=s(c,[["render",n]]),i=JSON.parse('{"path":"/posts/sudo-secure-path.html","title":"关于sudo的secure_path设置","lang":"zh-CN","frontmatter":{"date":"2024-12-11T00:00:00.000Z"},"headers":[],"git":{"updatedTime":1763698804000,"contributors":[{"name":"shi0rik0","username":"shi0rik0","email":"anguuan@outlook.com","commits":1,"url":"https://github.com/shi0rik0"}],"changelog":[{"hash":"27621ea60c6645dc9e44007e7ab6fd2858c37eaf","time":1763698804000,"email":"anguuan@outlook.com","author":"shi0rik0","message":"Migrate posts"}]},"filePathRelative":"posts/sudo-secure-path.md","excerpt":"\\n<p>sudo 有一个名为<code>secure_path</code>的设置，从 sudo 1.9.16 开始，<code>secure_path</code>设置会默认启用。<a href=\\"https://www.sudo.ws/posts/2024/09/why-sudo-1.9.16-enables-secure_path-by-default/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">官方博客</a>介绍了这个改动的原因。</p>\\n<p>当使用 sudo 执行命令的时候，用户当前的环境变量会被修改。其中<code>PATH</code>会被设置为<code>secure_path</code>的值。因此，经常会发生加了<code>sudo</code>之后就找不到命令的情况。解决方法也是非常的简单，要么修改<code>secure_path</code>的值，要么直接删除这个设置，这样 sudo 就不会修改<code>PATH</code>了。</p>"}');export{u as comp,i as data};
